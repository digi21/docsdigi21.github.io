# Macros de base de datos

Las macros de base de datos son valores que le indican a Digi3D.NET que se deben calcular en el momento en el que se crea un registro en la base de datos.

Se pueden introducir opcionalmente en la propiedad [Valor por defecto](propiedades-de-los-campos.md#valor-por-defecto) de un determinado campo de base de datos.

En caso de que un determinado campo tenga asignada una macro, en el momento de almacenar el registro en la base de datos, Digi3D.NET sustituirá la macro por el valor calculado.

A continuación, el listado de macros soportadas por el programa:

| Macro                                          | Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ---------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| %UID%                                          | Almacena un GUID calculado en ese instante. Se almacena completo, con sus llaves como, por ejemplo: `{F9E7E680-3CDD-4733-A8F1-22F850F8774B}`                                                                                                                                                                                                                                                                                                                                                                                |
| %UID\_SIMPLE%                                  | Almacena un GUID calculado en ese instante. Se almacena completo, con sus llaves como, por ejemplo: `F9E7E680-3CDD-4733-A8F1-22F850F8774B`                                                                                                                                                                                                                                                                                                                                                                                  |
| %CENTROID\_TEXT%                               | En caso de que la geometría que se esté almacenando sea un polígono generado por una topología, almacena en este campo el texto del centroide del polígono.                                                                                                                                                                                                                                                                                                                                                                 |
| %CENTROID\_VALUE=\[valor]%                     | En caso de que la geometría que se esté almacenando sea un polígono generado por una topología, almacena en este campo el valor indicado a la derecha del igual de entre todos los valores que tenga asignados el código del centroide en la propiedad [Valores](../codigos/propiedades-del-codigo.md#valores).                                                                                                                                                                                                             |
| %ENTITY\_CODE%                                 | Almacena el código principal de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| %ENTITY\_CODE\_ID%                             | Almacena el ID de registro de base de datos del código principal de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| %ENTITY\_TEXT%                                 | En caso de que la geometría que se esté almacenando sea de tipo texto, almacena el texto de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_LENGTH\_2D%                           | Almacena el perímetro en el plano X, Y de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| %ENTITY\_LENGTH\_3D%                           | Almacena el perímetro tridimensional de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| %ENTITY\_AREA%                                 | Almacena el área de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| %ENTITY\_FIRST\_VERTEX\_Z%                     | Almacena la coordenada Z del primer vértice de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| %ENTITY\_FIRST\_VERTEX\_Z\_INT%                | Almacena la coordenada Z del primer vértice de la geometría redondeado al número entero más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                        |
| %ENTITY\_XMIN%                                 | Almacena la coordenada X mínima de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| %ENTITY\_XMIN\_TRUNC\_INT%                     | Almacena la coordenada X mínima de la geometría truncado a número entero.                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_XMIN\_ROUND\_INT%                     | Almacena la coordenada X mínima de la geometría redondeando al número entero más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_XMIN\_FLOOR\_INT%                     | Almacena la coordenada X mínima de la geometría redondeando al número inferior más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_XMIN\_CEIL\_INT%                      | Almacena la coordenada X mínima de la geometría redondeando al número superior más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_YMIN%                                 | Almacena la coordenada Y mínima de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| %ENTITY\_YMIN\_TRUNC\_INT%                     | Almacena la coordenada Y mínima de la geometría truncado a número entero.                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_YMIN\_ROUND\_INT%                     | Almacena la coordenada Y mínima de la geometría redondeando al número entero más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_YMIN\_FLOOR\_INT%                     | Almacena la coordenada Y mínima de la geometría redondeando al número inferior más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_YMIN\_CEIL\_INT%                      | Almacena la coordenada Y mínima de la geometría redondeando al número superior más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_ZMIN%                                 | Almacena la coordenada Z mínima de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| %ENTITY\_ZMIN\_TRUNC\_INT%                     | Almacena la coordenada Z mínima de la geometría truncado a número entero.                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_ZMIN\_ROUND\_INT%                     | Almacena la coordenada Z mínima de la geometría redondeando al número entero más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_ZMIN\_FLOOR\_INT%                     | Almacena la coordenada Z mínima de la geometría redondeando al número inferior más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_ZMIN\_CEIL\_INT%                      | Almacena la coordenada Z mínima de la geometría redondeando al número superior más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_XMAX%                                 | Almacena la coordenada X mínima de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| %ENTITY\_XMAX\_TRUNC\_INT%                     | Almacena la coordenada X máxima de la geometría truncado a número entero.                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_XMAX\_ROUND\_INT%                     | Almacena la coordenada X máxima de la geometría redondeando al número entero más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_XMAX\_FLOOR\_INT%                     | Almacena la coordenada X máxima de la geometría redondeando al número inferior más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_XMAX\_CEIL\_INT%                      | Almacena la coordenada X máxima de la geometría redondeando al número superior más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_YMAX%                                 | Almacena la coordenada Y mínima de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| %ENTITY\_YMAX\_TRUNC\_INT%                     | Almacena la coordenada Y máxima de la geometría truncado a número entero.                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_YMAX\_ROUND\_INT%                     | Almacena la coordenada Y máxima de la geometría redondeando al número entero más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_YMAX\_FLOOR\_INT%                     | Almacena la coordenada Y máxima de la geometría redondeando al número inferior más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_YMAX\_CEIL\_INT%                      | Almacena la coordenada Y máxima de la geometría redondeando al número superior más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_ZMAX%                                 | Almacena la coordenada Z mínima de la geometría.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| %ENTITY\_ZMAX\_TRUNC\_INT%                     | Almacena la coordenada Z máxima de la geometría truncado a número entero.                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_ZMAX\_ROUND\_INT%                     | Almacena la coordenada Z máxima de la geometría redondeando al número entero más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| %ENTITY\_ZMAX\_FLOOR\_INT%                     | Almacena la coordenada Z máxima de la geometría redondeando al número inferior más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_ZMAX\_CEIL\_INT%                      | Almacena la coordenada Z máxima de la geometría redondeando al número superior más cercano.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_WIDTH%                                | Almacena el ancho de la geometría (diferencia de coordenadas X máxima - X mínima)                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| %ENTITY\_HEIGHT%                               | Almacena el alto de la geometría (diferencia de coordenadas Y máxima - Y mínima)                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| %ENTITY\_LENGTH%                               | Almacena el largo de la geometría (diferencia de coordenadas Z máxima - Z mínima)                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| %ENTITY\_ROTATION\_TRIGONOMETRIC\_SEXAGESIMAL% | Almacena la rotación trigonométrica de la geometría en grados sexagesimales.                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| %ENTITY\_ROTATION\_TRIGONOMETRIC\_CENTESIMAL%  | Almacena la rotación trigonométrica de la geometría en grados centesimales.                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %ENTITY\_ROTATION\_TRIGONOMETRIC\_RADIAN%      | Almacena la rotación trigonométrica de la geometría en radianes.                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| %ENTITY\_ROTATION\_AZIMUTAL\_SEXAGESIMAL%      | Almacena la rotación azimutal de la geometría en grados sexagesimales.                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| %ENTITY\_ROTATION\_AZIMUTAL\_CENTESIMAL%       | Almacena la rotación azimutal de la geometría en grados centesimales.                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| %ENTITY\_ROTATION\_AZIMUTAL\_RADIAN%           | Almacena la rotación azimutal de la geometría en radianes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| %MACRO%                                        | <p>Expande la macro que aparece a la derecha de %MACRO%.</p><p>Ejemplo:</p><p>`%MACRO%$(NombreArchivoDibujo)</p>                                                                                                                                                                                                                                                                                                                                                                                                            |
| %DATE%                                         | Fecha actual.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| %DAY%                                          | Día del mes actual.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| %MONTH%                                        | Mes del año actual.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| %YEAR%                                         | Año actual.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| %TIME%                                         | Hora actual, incluyendo hora, minuto y segundo.                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| %HOUR%                                         | Hora actual.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| %MINUTE%                                       | Minuto actual.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| %SECOND%                                       | Segundo actual.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| %CODE\_VALUE=\[valor]%                         | <p>Extrae el valor "valor" del <a href="../codigos/propiedades-del-codigo.md#valores">diccionario de valores</a> asociado con el código de la geometría que se está almacenando.</p><p>Ejemplo: Si la geometría que se está almacenando tiene el código <code>020102</code> y en este código se ha asignado en su campo Valores el valor: <code>tipo_de_suelo=superficial</code> si en este campo indicamos <code>%CODE_VALUE=tipo_de_suelo%</code> se almacenará en la base de datos el valor <code>superficial</code></p> |
| %ENTITY\_ATTRIBUTE=\[nombre]%                  | <p>Extrae el valor del diccionario de atributos de la geometría.<br><br>Ejemplo: Si la geometría tiene asignado como atributo el valor Carriles=3, si introducimos %ENTITY_ATTRIBUTE=Carriles% se almacenará en la base de datos el valor 3</p>                                                                                                                                                                                                                                                                             |
